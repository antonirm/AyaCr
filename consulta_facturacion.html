<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>AyA - Costa Rica - Consulta Facturación</title>

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <!-- Toastr style -->
    <link href="css/plugins/toastr/toastr.min.css" rel="stylesheet">

    <!-- Gritter -->
    <link href="js/plugins/gritter/jquery.gritter.css" rel="stylesheet">

    <link href="css/animate.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle" width="75px" height="50px" src="img/aya_logo.png" />
                             </span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                            <span class="clear"> <span class="block m-t-xs"> <strong class="font-bold">Instituto Costarricense de Acueductos y Alcantarillados</strong>
                             </span> <!--span class="text-muted text-xs block">Art Director <b class="caret"></b></span--> </span> </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a href="profile.html">Profile</a></li>
                                <li><a href="contacts.html">Contacts</a></li>
                                <li><a href="mailbox.html">Mailbox</a></li>
                                <li class="divider"></li>
                                <li><a href="login.html">Logout</a></li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            AyA
                        </div>
                    </li>
                    <li>
                        <a href="layouts.html"><i class="fa fa-home"></i> <span class="nav-label">Inicio</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="form_basic.html">Inicio</a></li>
                        </ul>
                    </li>
					<li>
                        <a href="layouts.html"><i class="fa fa-map-marker"></i> <span class="nav-label">Puntos de atención</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="form_basic.html">Puntos de atención</a></li>
                        </ul>
                    </li>
					<li>
                        <a href="layouts.html"><i class="fa fa-wrench"></i> <span class="nav-label">Averías</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="form_basic.html">Averías</a></li>
                        </ul>
                    </li>
					<li>
                        <a href="consulta_facturacion.html"><i class="fa fa-calculator"></i> <span class="nav-label">Consulta facturación</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="consulta_facturacion.html">Consulta facturación</a></li>
                        </ul>
                    </li>
					<li>
                        <a href="info_general.html"><i class="fa fa-info-circle"></i> <span class="nav-label">Información general</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="info_general.html">Información general</a></li>
							<li><a href="info_1.html">Contraloría de Servicios</a></li>
							<li><a href="info_2.html">Cooperación Internacional</a></li>
							<li><a href="info_3.html">Auditoría</a></li>
							<li><a href="info_4.html">Capital Humano</a></li>
							<li><a href="info_5.html">Informes Financieros</a></li>
							<li><a href="doc_proyectos.html">Proyectos</a></li>
                        </ul>
                    </li>
					<li>
                        <a href="acerca_De.html"><i class="fa fa-users"></i> <span class="nav-label">Acerca de</span></a>
						<ul class="nav nav-second-level collapse">
                            <li><a href="acerca_de.html">Acerca de</a></li>
                        </ul>
                    </li>
                </ul>

            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg dashbard-1">
        <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
            <form role="search" class="navbar-form-custom" action="search_results.html">
                <div class="form-group">
                    <input type="text" placeholder="Buscar..." class="form-control" name="top-search" id="top-search">
                </div>
            </form>
        </div>
            <ul  style="margin-top:18px;" class="nav navbar-top-links navbar-right">
                <li>
                    <h4><span class="m-r-sm text-muted welcome-message">Instituto Costarricense de Acueductos y Alcantarillados</span></h4>
                </li>
			</ul>
        </nav>
        </div>
		
		<div class="wrapper wrapper-content animated fadeInLeft">
			<div id="consultaNis" class="row">
				<div class="col-lg-12">
					<div class="ibox float-e-margins">
						<div class="ibox-title">
							<h5>Consulta Facturación</h5>
						</div>
						<div class="ibox-content">
							<form class="form-horizontal">
								<div id="frmnis" class="form-group">
									<label class="col-sm-2 control-label">NIS:</label>
									<div class="col-sm-10">
										<input id="txtnis" type="text" name="txtnis" placeholder="###-####" class="form-control">
										<span class="help-block m-b-none">El número NIS puede ser encontrado en el encabezado de su recibo</span>
									</div>
								</div>
								
								<div class="form-group">
                                    <div class="col-sm-10 col-sm-offset-2">
                                        <button class="btn btn-primary pull-right" id="btnSubmit" type="button">Consultar</button>
                                    </div>
                                </div>
							</form>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row" id="pnlDetalle" style="visibility: hidden;">
				<div class="col-lg-12">
					<div class="ibox float-e-margins">
						<div class="ibox-title">
							<h5>Detalle Consulta Facturación</h5>
						</div>
						<div class="ibox-content">
							<div class="row">
								<div class="col-lg-4">
									<div id="dlWarning" style="display: none;" class="widget yellow-bg p-lg text-center">
										<div class="m-b-md">
											<i class="fa fa-warning fa-4x"></i>
											<h1 class="m-xs">Pago pronto a vencer</h1>
											<h3 class="font-bold no-margins">
												Su recibo vencerá en 4 dias
											</h3>
											<!--small>something</small-->
										</div>
									</div>
									
									<div id="dlError" style="display: none;" class="widget red-bg p-lg text-center">
										<div class="m-b-md">
											<i class="fa fa-warning fa-4x"></i>
											<h1 class="m-xs">Pago atrasado</h1>
											<h3 class="font-bold no-margins">
												Su recibo venció hace 4 dias
											</h3>
											<!--small>something</small-->
										</div>
									</div>
								</div>
								
								<div class="col-lg-8">
									<p id="txtDetalle"/>
									<br/>
									<p class="text-primary">Favor rellenar los siguientes campos si desea su facturación por correo o teléfono:</p>
									<form class="form-horizontal">
										<div class="form-group" id="grpEmail">
											<label class="col-sm-2 control-label">Correo:</label>
											<div class="col-sm-10">
												<input id="txtEmail" type="text" name="correo" placeholder="example@domain.com" class="form-control">
											</div>
										</div>
										<div class="form-group" id="grpPhone">
											<label class="col-sm-2 control-label">Teléfono:</label>
											<div class="col-sm-10">
												<input id="txtPhone" type="text" name="phone" placeholder="####-####" class="form-control">
											</div>
										</div>
										
										<div class="form-group">
											<div class="col-sm-10 col-sm-offset-2">
												<button class="btn btn-primary pull-right" id="btnSubmit2" type="button">Enviar</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
    </div>

    <!-- Mainly scripts -->
    <script src="js/jquery-2.1.1.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="js/plugins/slimscroll/jquery.slimscroll.min.js"></script>

    <!-- Flot -->
    <script src="js/plugins/flot/jquery.flot.js"></script>
    <script src="js/plugins/flot/jquery.flot.tooltip.min.js"></script>
    <script src="js/plugins/flot/jquery.flot.spline.js"></script>
    <script src="js/plugins/flot/jquery.flot.resize.js"></script>
    <script src="js/plugins/flot/jquery.flot.pie.js"></script>

    <!-- Peity -->
    <script src="js/plugins/peity/jquery.peity.min.js"></script>
    <script src="js/demo/peity-demo.js"></script>

    <!-- Custom and plugin javascript -->
    <script src="js/inspinia.js"></script>
    <script src="js/plugins/pace/pace.min.js"></script>

    <!-- jQuery UI -->
    <script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>

    <!-- GITTER -->
    <script src="js/plugins/gritter/jquery.gritter.min.js"></script>

    <!-- Sparkline -->
    <script src="js/plugins/sparkline/jquery.sparkline.min.js"></script>

    <!-- Sparkline demo data  -->
    <script src="js/demo/sparkline-demo.js"></script>

    <!-- ChartJS-->
    <script src="js/plugins/chartJs/Chart.min.js"></script>

    <!-- Toastr -->
    <script src="js/plugins/toastr/toastr.min.js"></script>


    <script>
        $(document).ready(function() {
			toastr.options = {
				showMethod: 'slideDown',
				timeOut: 4000
			};
			
			var txtPhone = document.getElementById("txtPhone");
			var grpPhone = document.getElementById("grpPhone");
			
			txtPhone.onchange = function () {
				if (!/^\d{4}\-\d{4}$/.test(txtPhone.value) && !grpPhone.classList.contains("has-error"))
					grpPhone.classList.add("has-error");
				else
					grpPhone.classList.remove("has-error");
			}
			
			var txtEmail = document.getElementById("txtEmail");
			var grpEmail = document.getElementById("grpEmail");
			
			txtEmail.onchange = function () {
				if (!/^\w+@\w+\.\w+$/.test(txtEmail.value) && !grpEmail.classList.contains("has-error"))
					grpEmail.classList.add("has-error");
				else
					grpEmail.classList.remove("has-error");
			}
			
			var dlWarning = document.getElementById("dlWarning");
			var dlError = document.getElementById("dlError");
			var pnlState = document.getElementById("pnlState");
			var btn = document.getElementById("btnSubmit");
			
			btn.onclick = function () {
				var value = document.getElementById("txtnis").value;
				
				if (!value) {
					document.getElementById("frmnis").classList.add("has-error");
					document.getElementById("pnlDetalle").style.visibility = 'hidden';
					toastr.error('Número NIS requerido', 'Faltan datos');
				} else if (!/^\d{7,}$/.test(value) || value.length > 10){
					document.getElementById("frmnis").classList.add("has-error");
					document.getElementById("pnlDetalle").style.visibility = 'hidden';
					toastr.error('El número NIS debe tener al menos 7 dígitos', 'NIS Inválido');
				} else {
					document.getElementById("frmnis").classList.remove("has-error");
					document.getElementById("pnlDetalle").style.visibility = 'visible';
					document.getElementById("pnlDetalle").classList.add("animated");
					document.getElementById("pnlDetalle").classList.add("fadeInLeft");
					
					location.href = "#pnlDetalle";
					dlWarning.style.display = "none";
					dlError.style.display = "none";
					
					if (value >= 1000000 && value <= 3000000) {
						$("#txtDetalle").html("No posee pagos pendientes");
						dlWarning.style.display = "inline-block";
					} else {
						if (value >= 3000001 && value <= 6000000)
							dlError.style.display = "inline-block";
						else if (value >= 6000001 && value <= 10000000) {
							dlWarning.style.display = "none";
							dlError.style.display = "none";
						}
						
						var txt = "";
						
						txt += "Tiene un cargo pendiente por <strong>₡8,450.00</strong><br/>";
						txt += "A nombre de: <strong>Juan Perez Castellón</strong><br/>";
						txt += "Fecha vencimiento: <strong>14 Mayo 2018</strong>";
						
						$("#txtDetalle").html(txt);
					}
				}
			}
			
			var btn2 = document.getElementById("btnSubmit2");
			
			btn2.onclick = function () {
				if (!txtPhone.value && !txtEmail.value) {
					toastr.error('Ha ocurrido un error al enviar la facturación, favor reinténtelo de nuevo', 'Error');
				} else {
					toastr.success('Se le ha enviado la información', 'Operación exitosa');
					txtPhone.value = "";
					txtEmail.value = "";
					txtnis.value = "";
					dlWarning.style.display = "none";
					dlError.style.display = "none";
					document.getElementById("pnlDetalle").style.visibility = 'hidden';
					location.href = "#consultaNis";
				}
			}
        });
    </script>
</body>
</html>
